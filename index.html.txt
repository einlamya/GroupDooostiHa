<!DOCTYPE html>
<html lang="fa">
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مینی‌اپ گروه‌ها</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            direction: rtl;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #333;
            font-size: 24px;
        }
        .category {
            margin: 20px;
        }
        .category button {
            padding: 15px 30px;
            margin: 10px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
        }
        .category button:hover {
            background-color: #45a049;
        }
        #travel-form {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .form-group {
            margin: 10px 0;
        }
        .form-group label {
            display: block;
            font-size: 16px;
            margin-bottom: 5px;
        }
        .form-group input, .form-group textarea {
            width: 90%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
        }
        #submit-travel {
            background-color: #008CBA;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #submit-travel:hover {
            background-color: #007399;
        }
    </style>
</head>
<body>
    <h1>🧳 مینی‌اپ گروه‌ها</h1>
    <div class="category">
        <button onclick="showSection('event')">🫂 ایونت‌ها</button>
        <button onclick="showSection('shop')">🛍️ فروشگاه</button>
        <button onclick="showSection('travel')">🏕️ سفرها</button>
    </div>
    <div id="travel-form">
        <h2>📝 ثبت آگهی سفر</h2>
        <div class="form-group">
            <label>📷 تصویر (لینک یا آپلود بعداً):</label>
            <input type="text" id="travel-photo" placeholder="لینک تصویر (اختیاری)">
        </div>
        <div class="form-group">
            <label>👤 نام برگزارکننده (نام تور):</label>
            <input type="text" id="travel-organizer" placeholder="مثلاً: تور طبیعت‌گردی">
        </div>
        <div class="form-group">
            <label>🌍 نوع سفر (داخلی/خارجی):</label>
            <input type="text" id="travel-type" placeholder="مثلاً: داخلی">
        </div>
        <div class="form-group">
            <label>🧑‍✈️ نام لیدر:</label>
            <input type="text" id="travel-leader" placeholder="مثلاً: علی محمدی">
        </div>
        <div class="form-group">
            <label>🚗 وسیله سفر:</label>
            <input type="text" id="travel-vehicle" placeholder="مثلاً: اتوبوس">
        </div>
        <div class="form-group">
            <label>📍 مبدا:</label>
            <input type="text" id="travel-origin" placeholder="مثلاً: تهران">
        </div>
        <div class="form-group">
            <label>🏞️ مقصد:</label>
            <input type="text" id="travel-destination" placeholder="مثلاً: شیراز">
        </div>
        <div class="form-group">
            <label>📅 تاریخ رفت:</label>
            <input type="text" id="travel-start-date" placeholder="مثلاً: 1404/03/01">
        </div>
        <div class="form-group">
            <label>📅 تاریخ برگشت:</label>
            <input type="text" id="travel-return-date" placeholder="مثلاً: 1404/03/05">
        </div>
        <div class="form-group">
            <label>🧍 ظرفیت باقی‌مانده:</label>
            <input type="text" id="travel-capacity" placeholder="مثلاً: ۴ نفر">
        </div>
        <div class="form-group">
            <label>💰 هزینه:</label>
            <input type="text" id="travel-cost" placeholder="مثلاً: ۱,۰۰۰,۰۰۰ تومان">
        </div>
        <div class="form-group">
            <label>💸 هزینه اضافی:</label>
            <input type="text" id="travel-extra-cost" placeholder="مثلاً: ۲۰۰,۰۰۰ تومان">
        </div>
        <div class="form-group">
            <label>💳 شماره کارت:</label>
            <input type="text" id="travel-card" placeholder="مثلاً: 1234-5678-9012-3456">
        </div>
        <div class="form-group">
            <label>👤 به نام (صاحب حساب):</label>
            <input type="text" id="travel-card-owner" placeholder="مثلاً: علی محمدی">
        </div>
        <div class="form-group">
            <label>📞 تلفن هماهنگی:</label>
            <input type="text" id="travel-phone" placeholder="مثلاً: 09123456789">
        </div>
        <div class="form-group">
            <label>📝 توضیحات بیشتر:</label>
            <textarea id="travel-description" placeholder="توضیحات سفر..."></textarea>
        </div>
        <button id="submit-travel">✅ ثبت آگهی</button>
    </div>
    <script>
        const firebaseConfig = {
    apiKey: "AIzaSyCfMjevdSohHrq6dJxdlrmJ0MZT5HZKZAw",
    authDomain: "doostihagroupapp.firebaseapp.com",
    projectId: "doostihagroupapp",
    storageBucket: "doostihagroupapp.firebasestorage.app",
    messagingSenderId: "746714229972",
    appId: "1:746714229972:web:72a26758b58e2ede009f41"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

        
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.MainButton.setText("بستن").show().onClick(() => tg.close());

        function showSection(section) {
            if (section === 'travel') {
                document.getElementById('travel-form').style.display = 'block';
            } else {
                document.getElementById('travel-form').style.display = 'none';
                alert(`بخش ${section} هنوز آماده نیست!`);
            }
        }

        document.getElementById('submit-travel').addEventListener('click', () => {
    const travelData = {
        photo: document.getElementById('travel-photo').value || 'ندارد',
        organizer: document.getElementById('travel-organizer').value,
        type: document.getElementById('travel-type').value,
        leader: document.getElementById('travel-leader').value,
        vehicle: document.getElementById('travel-vehicle').value,
        origin: document.getElementById('travel-origin').value,
        destination: document.getElementById('travel-destination').value,
        startDate: document.getElementById('travel-start-date').value,
        returnDate: document.getElementById('travel-return-date').value,
        capacity: document.getElementById('travel-capacity').value,
        cost: document.getElementById('travel-cost').value,
        extraCost: document.getElementById('travel-extra-cost').value,
        card: document.getElementById('travel-card').value,
        cardOwner: document.getElementById('travel-card-owner').value,
        phone: document.getElementById('travel-phone').value,
        description: document.getElementById('travel-description').value
    };
    db.collection('travels').add(travelData)
        .then(() => {
            alert('آگهی سفر ثبت شد!');
            document.getElementById('travel-form').reset();
        })
        .catch(error => {
            alert('خطا: ' + error.message);
        });
});
        });
    </script>
</body>
</html>
