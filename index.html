<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>گروه دوستی‌ها</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f4f4f4;
    }
    h1, h2, h3 {
      text-align: center;
    }
    .form-container, .ads-container {
      margin: 20px 0;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    input, select, textarea {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
    }
    button {
      padding: 10px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button[type="reset"] {
      background-color: #dc3545;
    }
    .card {
      border: 1px solid #ccc;
      padding: 15px;
      margin: 10px;
      border-radius: 5px;
      background-color: #f9f9f9;
    }
  </style>
</head>
<body>
  <h1>🧳 گروه دوستی‌ها</h1>
  <p style="text-align: center;">دوستی‌ها از اینجا آغاز می‌شوند</p>

  <!-- فرم ثبت تور -->
  <div class="form-container">
    <h2>🏕️ ثبت آگهی تورها</h2>
    <form id="tourForm">
      <input type="text" id="tourName" placeholder="نام برگزارکننده (نام تور)" required>
      <select id="tripType" required>
        <option value="" disabled selected>نوع سفر</option>
        <option value="داخلی">داخلی</option>
        <option value="خارجی">خارجی</option>
      </select>
      <input type="text" id="leaderName" placeholder="نام لیدر" required>
      <select id="transport" required>
        <option value="" disabled selected>وسیله سفر</option>
        <option value="خودرو شخصی">خودرو شخصی</option>
        <option value="اتوبوس">اتوبوس</option>
        <option value="هواپیما">هواپیما</option>
        <option value="هیچ‌هایک">هیچ‌هایک</option>
        <option value="سایر">سایر</option>
      </select>
      <input type="text" id="origin" placeholder="مبدا" required>
      <input type="text" id="destination" placeholder="مقصد" required>
      <input type="date" id="startDate" placeholder="تاریخ رفت" required>
      <input type="date" id="endDate" placeholder="تاریخ برگشت" required>
      <input type="number" id="capacity" placeholder="ظرفیت باقی‌مانده" required>
      <input type="number" id="cost" placeholder="هزینه" required>
      <input type="number" id="extraCost" placeholder="هزینه اضافی">
      <input type="text" id="cardNumber" placeholder="شماره کارت واریزی" required>
      <input type="text" id="cardHolder" placeholder="به نام" required>
      <input type="tel" id="phone" placeholder="تلفن هماهنگی" required>
      <textarea id="description" placeholder="توضیحات بیشتر"></textarea>
      <input type="file" id="tourImage" accept="image/*">
      <button type="submit">✅ ثبت آگهی</button>
      <button type="reset">🗑️ پاک کردن</button>
    </form>
  </div>

  <!-- فرم ثبت ایونت -->
  <div class="form-container">
    <h2>🫂 ثبت آگهی ایونت</h2>
    <form id="eventForm">
      <select id="eventType" required>
        <option value="" disabled selected>عنوان</option>
        <option value="دورهمی">دورهمی (پیاده‌روی، کافه، پارک، سینما...)</option>
        <option value="ورزش">ورزش (کوه‌پیمایی، بدمینتون، دوچرخه‌سواری...)</option>
        <option value="کمپ و سفر">کمپ و سفر (داخلی، خارجی، آبشار، دشت...)</option>
        <option value="هم‌مسیر">هم‌مسیر (شیراز به اصفهان، ونک به صادقیه...)</option>
        <option value="دیوار دوستی">دیوار دوستی (واگذاری یخچال، کتاب...)</option>
        <option value="داوطلبانه">داوطلبانه (آموزش، مشورت...)</option>
        <option value="واگذاری">واگذاری (حیوان خانگی، بلیط...)</option>
        <option value="مشاوره و راهنمایی">مشاوره و راهنمایی (پزشکی، وام...)</option>
        <option value="متفرقه">متفرقه (استخدام، کسب و کار خانگی...)</option>
        <option value="سایر">سایر</option>
      </select>
      <input type="date" id="eventStartDate" placeholder="تاریخ شروع" required>
      <input type="date" id="eventEndDate" placeholder="تاریخ پایان" required>
      <input type="text" id="location" placeholder="مکان" required>
      <input type="number" id="eventCapacity" placeholder="ظرفیت" required>
      <input type="number" id="eventCost" placeholder="هزینه" required>
      <textarea id="eventDescription" placeholder="توضیح بیشتر"></textarea>
      <button type="submit">✅ ثبت ایونت</button>
      <button type="reset">🗑️ پاک کردن</button>
    </form>
  </div>

  <!-- فرم ثبت فروشگاه -->
  <div class="form-container">
    <h2>🛍️ ثبت آگهی فروشگاه</h2>
    <form id="shopForm">
      <select id="productCondition" required>
        <option value="" disabled selected>وضعیت محصول</option>
        <option value="نو">نو</option>
        <option value="کارکرده">کارکرده</option>
        <option value="در حد نو">در حد نو</option>
      </select>
      <input type="text" id="brand" placeholder="برند کالا" required>
      <input type="text" id="model" placeholder="مدل" required>
      <input type="number" id="productionYear" placeholder="سال تولید" required>
      <input type="number" id="price" placeholder="قیمت" required>
      <textarea id="shopDescription" placeholder="توضیحات بیشتر"></textarea>
      <input type="file" id="shopImage" accept="image/*">
      <button type="submit">✅ ثبت محصول</button>
      <button type="reset">🗑️ پاک کردن</button>
    </form>
  </div>

  <!-- نمایش آگهی‌ها -->
  <div class="ads-container">
    <h2>🏕️ آگهی‌های تورها</h2>
    <div id="tourAds"></div>
  </div>
  <div class="ads-container">
    <h2>🫂 آگهی‌های ایونت‌ها</h2>
    <div id="eventAds"></div>
  </div>
  <div class="ads-container">
    <h2>🛍️ آگهی‌های فروشگاه</h2>
    <div id="shopAds"></div>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    // Import Firebase
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
    import { getFirestore, collection, addDoc, getDocs } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

    // تنظیمات Firebase (اینجا باید اطلاعات پروژه خودت رو بذاری)
    const firebaseConfig = {


		  apiKey: "AIzaSyCfMjevdSohHrq6dJxdlrmJ0MZT5HZKZAw",
		  authDomain: "doostihagroupapp.firebaseapp.com",
		  projectId: "doostihagroupapp",
		  storageBucket: "doostihagroupapp.firebasestorage.app",
		  messagingSenderId: "746714229972",
		  appId: "1:746714229972:web:72a26758b58e2ede009f41"



    };

    // راه‌اندازی Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ثبت تور
    const tourForm = document.getElementById('tourForm');
    tourForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const tourData = {
        tourName: document.getElementById('tourName').value,
        tripType: document.getElementById('tripType').value,
        leaderName: document.getElementById('leaderName').value,
        transport: document.getElementById('transport').value,
        origin: document.getElementById('origin').value,
        destination: document.getElementById('destination').value,
        startDate: document.getElementById('startDate').value,
        endDate: document.getElementById('endDate').value,
        capacity: parseInt(document.getElementById('capacity').value),
        cost: parseInt(document.getElementById('cost').value),
        extraCost: parseInt(document.getElementById('extraCost').value) || 0,
        cardNumber: document.getElementById('cardNumber').value,
        cardHolder: document.getElementById('cardHolder').value,
        phone: document.getElementById('phone').value,
        description: document.getElementById('description').value,
        image: document.getElementById('tourImage').files[0] ? "image_uploaded" : ""
      };
      try {
        await addDoc(collection(db, "tours"), tourData);
        alert("تور با موفقیت ثبت شد!");
        tourForm.reset();
        loadTours();
      } catch (error) {
        console.error("خطا تو ثبت تور:", error);
        alert("یه مشکلی پیش اومد! دوباره امتحان کن.");
      }
    });

    // ثبت ایونت
    const eventForm = document.getElementById('eventForm');
    eventForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const eventData = {
        eventType: document.getElementById('eventType').value,
        startDate: document.getElementById('eventStartDate').value,
        endDate: document.getElementById('eventEndDate').value,
        location: document.getElementById('location').value,
        capacity: parseInt(document.getElementById('eventCapacity').value),
        cost: parseInt(document.getElementById('eventCost').value),
        description: document.getElementById('eventDescription').value
      };
      try {
        await addDoc(collection(db, "events"), eventData);
        alert("ایونت با موفقیت ثبت شد!");
        eventForm.reset();
        loadEvents();
      } catch (error) {
        console.error("خطا تو ثبت ایونت:", error);
        alert("یه مشکلی پیش اومد! دوباره امتحان کن.");
      }
    });

    // ثبت محصول فروشگاه
    const shopForm = document.getElementById('shopForm');
    shopForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const shopData = {
        condition: document.getElementById('productCondition').value,
        brand: document.getElementById('brand').value,
        model: document.getElementById('model').value,
        productionYear: parseInt(document.getElementById('productionYear').value),
        price: parseInt(document.getElementById('price').value),
        description: document.getElementById('shopDescription').value,
        image: document.getElementById('shopImage').files[0] ? "image_uploaded" : ""
      };
      try {
        await addDoc(collection(db, "shop"), shopData);
        alert("محصول با موفقیت ثبت شد!");
        shopForm.reset();
        loadShopItems();
      } catch (error) {
        console.error("خطا تو ثبت محصول:", error);
        alert("یه مشکلی پیش اومد! دوباره امتحان کن.");
      }
    });

    // نمایش تورها
    async function loadTours() {
      const tourAds = document.getElementById('tourAds');
      tourAds.innerHTML = '';
      try {
        const querySnapshot = await getDocs(collection(db, "tours"));
        querySnapshot.forEach((doc) => {
          const tour = doc.data();
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <h3>${tour.tourName}</h3>
            <p>نوع سفر: ${tour.tripType}</p>
            <p>لیدر: ${tour.leaderName}</p>
            <p>وسیله: ${tour.transport}</p>
            <p>مبدا: ${tour.origin}</p>
            <p>مقصد: ${tour.destination}</p>
            <p>تاریخ رفت: ${tour.startDate}</p>
            <p>تاریخ برگشت: ${tour.endDate}</p>
            <p>ظرفیت: ${tour.capacity}</p>
            <p>هزینه: ${tour.cost} تومان</p>
            <p>هزینه اضافی: ${tour.extraCost} تومان</p>
            <p>شماره کارت: ${tour.cardNumber}</p>
            <p>به نام: ${tour.cardHolder}</p>
            <p>تلفن: ${tour.phone}</p>
            <p>توضیحات: ${tour.description}</p>
          `;
          tourAds.appendChild(card);
        });
      } catch (error) {
        console.error("خطا تو لود تورها:", error);
      }
    }

    // نمایش ایونت‌ها
    async function loadEvents() {
      const eventAds = document.getElementById('eventAds');
      eventAds.innerHTML = '';
      try {
        const querySnapshot = await getDocs(collection(db, "events"));
        querySnapshot.forEach((doc) => {
          const event = doc.data();
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <h3>${event.eventType}</h3>
            <p>تاریخ شروع: ${event.startDate}</p>
            <p>تاریخ پایان: ${event.endDate}</p>
            <p>مکان: ${event.location}</p>
            <p>ظرفیت: ${event.capacity}</p>
            <p>هزینه: ${event.cost} تومان</p>
            <p>توضیحات: ${event.description}</p>
          `;
          eventAds.appendChild(card);
        });
      } catch (error) {
        console.error("خطا تو لود ایونت‌ها:", error);
      }
    }

    // نمایش محصولات فروشگاه
    async function loadShopItems() {
      const shopAds = document.getElementById('shopAds');
      shopAds.innerHTML = '';
      try {
        const querySnapshot = await getDocs(collection(db, "shop"));
        querySnapshot.forEach((doc) => {
          const item = doc.data();
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <h3>${item.brand} ${item.model}</h3>
            <p>وضعیت: ${item.condition}</p>
            <p>سال تولید: ${item.productionYear}</p>
            <p>قیمت: ${item.price} تومان</p>
            <p>توضیحات: ${item.description}</p>
          `;
          shopAds.appendChild(card);
        });
      } catch (error) {
        console.error("خطا تو لود محصولات:", error);
      }
    }

    // لود همه آگهی‌ها موقع باز شدن صفحه
    loadTours();
    loadEvents();
    loadShopItems();
  </script>
</body>
</html>
