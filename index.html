<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ú¯Ø±ÙˆÙ‡ Ø¯ÙˆØ³ØªÛŒâ€ŒÙ‡Ø§</title>
  <link href="https://cdn.jsdelivr.net/npm/persian-date@1.1.0/dist/js/persian-date.min.js" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f4f4f4;
      direction: rtl;
      text-align: right;
    }
    h1, h2, h3 {
      text-align: center;
    }
    .main-sections, .section-container, .filter-container {
      margin: 20px 0;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .main-sections {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
    }
    .main-section-card {
      width: 30%;
      padding: 20px;
      text-align: center;
      background-color: #e9ecef;
      border-radius: 8px;
      cursor: pointer;
      margin: 10px;
    }
    .main-section-card:hover {
      background-color: #dee2e6;
    }
    .form-container {
      max-width: 30%;
      margin: 0 auto;
      display: none;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .form-container.active {
      display: block;
      animation: slideDown 0.5s ease-in-out;
    }
    @keyframes slideDown {
      from { transform: translateY(-20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    input, select, textarea {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
    }
    button {
      padding: 10px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button.toggle-form {
      background-color: #007bff;
    }
    button.toggle-form.close {
      background-color: #dc3545;
    }
    button[type="reset"] {
      background-color: #dc3545;
    }
    .card {
      border: 1px solid #ccc;
      padding: 15px;
      margin: 10px;
      border-radius: 5px;
      background-color: #f9f9f9;
      direction: rtl;
      text-align: right;
    }
    .card img {
      max-width: 100px;
      border-radius: 5px;
    }
    .filter-container form {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }
    .filter-container input[type="checkbox"] {
      width: auto;
    }
  </style>
</head>
<body>
  <h1>ğŸ§³ Ú¯Ø±ÙˆÙ‡ Ø¯ÙˆØ³ØªÛŒâ€ŒÙ‡Ø§</h1>
  <p style="text-align: center;">Ø¯ÙˆØ³ØªÛŒâ€ŒÙ‡Ø§ Ø§Ø² Ø§ÛŒÙ†Ø¬Ø§ Ø¢ØºØ§Ø² Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</p>

  <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
  <div class="main-sections" id="mainSections">
    <div class="main-section-card" onclick="showSection('tours')">ğŸ•ï¸ ØªÙˆØ±Ù‡Ø§</div>
    <div class="main-section-card" onclick="showSection('events')">ğŸ«‚ Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§</div>
    <div class="main-section-card" onclick="showSection('shop')">ğŸ›ï¸ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</div>
  </div>

  <!-- Ø¨Ø®Ø´ ØªÙˆØ±Ù‡Ø§ -->
  <div class="section-container" id="toursSection" style="display: none;">
    <h2>ğŸ•ï¸ ØªÙˆØ±Ù‡Ø§</h2>
    <div class="form-container" id="tourFormContainer">
      <button class="toggle-form" onclick="toggleForm('tourFormContainer', this)">Ø¨Ø§Ø² Ú©Ø±Ø¯Ù†</button>
      <form id="tourForm" style="display: none;">
        <input type="text" id="tourName" placeholder="Ù†Ø§Ù… Ø¨Ø±Ú¯Ø²Ø§Ø±Ú©Ù†Ù†Ø¯Ù‡ (Ù†Ø§Ù… ØªÙˆØ±)">
        <select id="tripType">
          <option value="">Ù†ÙˆØ¹ Ø³ÙØ±</option>
          <option value="Ø¯Ø§Ø®Ù„ÛŒ">Ø¯Ø§Ø®Ù„ÛŒ</option>
          <option value="Ø®Ø§Ø±Ø¬ÛŒ">Ø®Ø§Ø±Ø¬ÛŒ</option>
        </select>
        <input type="text" id="leaderName" placeholder="Ù†Ø§Ù… Ù„ÛŒØ¯Ø±">
        <select id="transport">
          <option value="">ÙˆØ³ÛŒÙ„Ù‡ Ø³ÙØ±</option>
          <option value="Ø®ÙˆØ¯Ø±Ùˆ Ø´Ø®ØµÛŒ">Ø®ÙˆØ¯Ø±Ùˆ Ø´Ø®ØµÛŒ</option>
          <option value="Ø§ØªÙˆØ¨ÙˆØ³">Ø§ØªÙˆØ¨ÙˆØ³</option>
          <option value="Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§">Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§</option>
          <option value="Ù‡ÛŒÚ†â€ŒÙ‡Ø§ÛŒÚ©">Ù‡ÛŒÚ†â€ŒÙ‡Ø§ÛŒÚ©</option>
          <option value="Ø³Ø§ÛŒØ±">Ø³Ø§ÛŒØ±</option>
        </select>
        <input type="text" id="origin" placeholder="Ù…Ø¨Ø¯Ø§">
        <input type="text" id="destination" placeholder="Ù…Ù‚ØµØ¯">
        <input type="text" id="startDate" placeholder="ØªØ§Ø±ÛŒØ® Ø±ÙØª (Ø´Ù…Ø³ÛŒ)" class="persian-date">
        <input type="text" id="endDate" placeholder="ØªØ§Ø±ÛŒØ® Ø¨Ø±Ú¯Ø´Øª (Ø´Ù…Ø³ÛŒ)" class="persian-date">
        <input type="text" id="capacity" placeholder="Ø¸Ø±ÙÛŒØª Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡">
        <input type="text" id="cost" placeholder="Ù‡Ø²ÛŒÙ†Ù‡">
        <input type="text" id="extraCost" placeholder="Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø¶Ø§ÙÛŒ">
        <input type="text" id="cardNumber" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª ÙˆØ§Ø±ÛŒØ²ÛŒ">
        <input type="text" id="cardHolder" placeholder="Ø¨Ù‡ Ù†Ø§Ù…">
        <input type="tel" id="phone" placeholder="ØªÙ„ÙÙ† Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ">
        <textarea id="description" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨ÛŒØ´ØªØ±"></textarea>
        <input type="file" id="tourImage" accept="image/*">
        <button type="submit">âœ… Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ</button>
        <button type="reset">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
      </form>
    </div>
    <div class="filter-container">
      <h3>ÙÛŒÙ„ØªØ± ØªÙˆØ±Ù‡Ø§</h3>
      <form id="tourFilterForm">
        <input type="text" id="tourFilterName" placeholder="Ù†Ø§Ù… ØªÙˆØ±">
        <select id="tourFilterType">
          <option value="">Ù‡Ù…Ù‡ Ø§Ù†ÙˆØ§Ø¹</option>
          <option value="Ø¯Ø§Ø®Ù„ÛŒ">Ø¯Ø§Ø®Ù„ÛŒ</option>
          <option value="Ø®Ø§Ø±Ø¬ÛŒ">Ø®Ø§Ø±Ø¬ÛŒ</option>
        </select>
        <input type="text" id="tourFilterLeader" placeholder="Ù†Ø§Ù… Ù„ÛŒØ¯Ø±">
        <select id="tourFilterTransport">
          <option value="">Ù‡Ù…Ù‡ ÙˆØ³Ø§ÛŒÙ„</option>
          <option value="Ø®ÙˆØ¯Ø±Ùˆ Ø´Ø®ØµÛŒ">Ø®ÙˆØ¯Ø±Ùˆ Ø´Ø®ØµÛŒ</option>
          <option value="Ø§ØªÙˆØ¨ÙˆØ³">Ø§ØªÙˆØ¨ÙˆØ³</option>
          <option value="Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§">Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§</option>
          <option value="Ù‡ÛŒÚ†â€ŒÙ‡Ø§ÛŒÚ©">Ù‡ÛŒÚ†â€ŒÙ‡Ø§ÛŒÚ©</option>
          <option value="Ø³Ø§ÛŒØ±">Ø³Ø§ÛŒØ±</option>
        </select>
        <input type="text" id="tourFilterOrigin" placeholder="Ù…Ø¨Ø¯Ø§">
        <input type="text" id="tourFilterDestination" placeholder="Ù…Ù‚ØµØ¯">
        <input type="text" id="tourFilterStartDate" placeholder="ØªØ§Ø±ÛŒØ® Ø±ÙØª (Ø´Ù…Ø³ÛŒ)" class="persian-date">
        <input type="text" id="tourFilterEndDate" placeholder="ØªØ§Ø±ÛŒØ® Ø¨Ø±Ú¯Ø´Øª (Ø´Ù…Ø³ÛŒ)" class="persian-date">
        <input type="text" id="tourFilterCapacity" placeholder="Ø¸Ø±ÙÛŒØª">
        <input type="text" id="tourFilterCost" placeholder="Ù‡Ø²ÛŒÙ†Ù‡">
        <input type="checkbox" id="tourNotify" name="tourNotify">
        <label for="tourNotify">Ø§Ø¹Ù„Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯</label>
        <button type="submit">ÙÛŒÙ„ØªØ± Ú©Ù†</button>
      </form>
    </div>
    <div id="tourAds"></div>
  </div>

  <!-- Ø¨Ø®Ø´ Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§ -->
  <div class="section-container" id="eventsSection" style="display: none;">
    <h2>ğŸ«‚ Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§</h2>
    <div class="form-container" id="eventFormContainer">
      <button class="toggle-form" onclick="toggleForm('eventFormContainer', this)">Ø¨Ø§Ø² Ú©Ø±Ø¯Ù†</button>
      <form id="eventForm" style="display: none;">
        <select id="eventType">
          <option value="">Ø¹Ù†ÙˆØ§Ù†</option>
          <option value="Ø¯ÙˆØ±Ù‡Ù…ÛŒ">Ø¯ÙˆØ±Ù‡Ù…ÛŒ</option>
          <option value="ÙˆØ±Ø²Ø´">ÙˆØ±Ø²Ø´</option>
          <option value="Ú©Ù…Ù¾ Ùˆ Ø³ÙØ±">Ú©Ù…Ù¾ Ùˆ Ø³ÙØ±</option>
          <option value="Ù‡Ù…â€ŒÙ…Ø³ÛŒØ±">Ù‡Ù…â€ŒÙ…Ø³ÛŒØ±</option>
          <option value="Ø¯ÛŒÙˆØ§Ø± Ø¯ÙˆØ³ØªÛŒ">Ø¯ÛŒÙˆØ§Ø± Ø¯ÙˆØ³ØªÛŒ</option>
          <option value="Ø¯Ø§ÙˆØ·Ù„Ø¨Ø§Ù†Ù‡">Ø¯Ø§ÙˆØ·Ù„Ø¨Ø§Ù†Ù‡</option>
          <option value="ÙˆØ§Ú¯Ø°Ø§Ø±ÛŒ">ÙˆØ§Ú¯Ø°Ø§Ø±ÛŒ</option>
          <option value="Ù…Ø´Ø§ÙˆØ±Ù‡ Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ">Ù…Ø´Ø§ÙˆØ±Ù‡ Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ</option>
          <option value="Ù…ØªÙØ±Ù‚Ù‡">Ù…ØªÙØ±Ù‚Ù‡</option>
          <option value="Ø³Ø§ÛŒØ±">Ø³Ø§ÛŒØ±</option>
        </select>
        <input type="text" id="eventStartDate" placeholder="ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ (Ø´Ù…Ø³ÛŒ)" class="persian-date">
        <input type="text" id="eventEndDate" placeholder="ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† (Ø´Ù…Ø³ÛŒ)" class="persian-date">
        <input type="text" id="location" placeholder="Ù…Ú©Ø§Ù†">
        <input type="text" id="eventCapacity" placeholder="Ø¸Ø±ÙÛŒØª">
        <input type="text" id="eventCost" placeholder="Ù‡Ø²ÛŒÙ†Ù‡">
        <textarea id="eventDescription" placeholder="ØªÙˆØ¶ÛŒØ­ Ø¨ÛŒØ´ØªØ±"></textarea>
        <input type="file" id="eventImage" accept="image/*">
        <button type="submit">âœ… Ø«Ø¨Øª Ø§ÛŒÙˆÙ†Øª</button>
        <button type="reset">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
      </form>
    </div>
    <div class="filter-container">
      <h3>ÙÛŒÙ„ØªØ± Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§</h3>
      <form id="eventFilterForm">
        <select id="eventFilterType">
          <option value="">Ù‡Ù…Ù‡ Ø§Ù†ÙˆØ§Ø¹</option>
          <option value="Ø¯ÙˆØ±Ù‡Ù…ÛŒ">Ø¯ÙˆØ±Ù‡Ù…ÛŒ</option>
          <option value="ÙˆØ±Ø²Ø´">ÙˆØ±Ø²Ø´</option>
          <option value="Ú©Ù…Ù¾ Ùˆ Ø³ÙØ±">Ú©Ù…Ù¾ Ùˆ Ø³ÙØ±</option>
          <option value="Ù‡Ù…â€ŒÙ…Ø³ÛŒØ±">Ù‡Ù…â€ŒÙ…Ø³ÛŒØ±</option>
          <option value="Ø¯ÛŒÙˆØ§Ø± Ø¯ÙˆØ³ØªÛŒ">Ø¯ÛŒÙˆØ§Ø± Ø¯ÙˆØ³ØªÛŒ</option>
          <option value="Ø¯Ø§ÙˆØ·Ù„Ø¨Ø§Ù†Ù‡">Ø¯Ø§ÙˆØ·Ù„Ø¨Ø§Ù†Ù‡</option>
          <option value="ÙˆØ§Ú¯Ø°Ø§Ø±ÛŒ">ÙˆØ§Ú¯Ø°Ø§Ø±ÛŒ</option>
          <option value="Ù…Ø´Ø§ÙˆØ±Ù‡ Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ">Ù…Ø´Ø§ÙˆØ±Ù‡ Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ</option>
          <option value="Ù…ØªÙØ±Ù‚Ù‡">Ù…ØªÙØ±Ù‚Ù‡</option>
          <option value="Ø³Ø§ÛŒØ±">Ø³Ø§ÛŒØ±</option>
        </select>
        <input type="text" id="eventFilterStartDate" placeholder="ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹ (Ø´Ù…Ø³ÛŒ)" class="persian-date">
        <input type="text" id="eventFilterEndDate" placeholder="ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù† (Ø´Ù…Ø³ÛŒ)" class="persian-date">
        <input type="text" id="eventFilterLocation" placeholder="Ù…Ú©Ø§Ù†">
        <input type="text" id="eventFilterCapacity" placeholder="Ø¸Ø±ÙÛŒØª">
        <input type="text" id="eventFilterCost" placeholder="Ù‡Ø²ÛŒÙ†Ù‡">
        <input type="checkbox" id="eventNotify" name="eventNotify">
        <label for="eventNotify">Ø§Ø¹Ù„Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯</label>
        <button type="submit">ÙÛŒÙ„ØªØ± Ú©Ù†</button>
      </form>
    </div>
    <div id="eventAds"></div>
  </div>

  <!-- Ø¨Ø®Ø´ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ -->
  <div class="section-container" id="shopSection" style="display: none;">
    <h2>ğŸ›ï¸ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h2>
    <div class="form-container" id="shopFormContainer">
      <button class="toggle-form" onclick="toggleForm('shopFormContainer', this)">Ø¨Ø§Ø² Ú©Ø±Ø¯Ù†</button>
      <form id="shopForm" style="display: none;">
        <select id="productCondition">
          <option value="">ÙˆØ¶Ø¹ÛŒØª Ù…Ø­ØµÙˆÙ„</option>
          <option value="Ù†Ùˆ">Ù†Ùˆ</option>
          <option value="Ú©Ø§Ø±Ú©Ø±Ø¯Ù‡">Ú©Ø§Ø±Ú©Ø±Ø¯Ù‡</option>
          <option value="Ø¯Ø± Ø­Ø¯ Ù†Ùˆ">Ø¯Ø± Ø­Ø¯ Ù†Ùˆ</option>
        </select>
        <input type="text" id="brand" placeholder="Ø¨Ø±Ù†Ø¯ Ú©Ø§Ù„Ø§">
        <input type="text" id="model" placeholder="Ù…Ø¯Ù„">
        <input type="text" id="productionYear" placeholder="Ø³Ø§Ù„ ØªÙˆÙ„ÛŒØ¯">
        <input type="text" id="price" placeholder="Ù‚ÛŒÙ…Øª">
        <textarea id="shopDescription" placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨ÛŒØ´ØªØ±"></textarea>
        <input type="file" id="shopImage" accept="image/*">
        <button type="submit">âœ… Ø«Ø¨Øª Ù…Ø­ØµÙˆÙ„</button>
        <button type="reset">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
      </form>
    </div>
    <div class="filter-container">
      <h3>ÙÛŒÙ„ØªØ± Ù…Ø­ØµÙˆÙ„Ø§Øª ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h3>
      <form id="shopFilterForm">
        <select id="shopFilterCondition">
          <option value="">Ù‡Ù…Ù‡ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§</option>
          <option value="Ù†Ùˆ">Ù†Ùˆ</option>
          <option value="Ú©Ø§Ø±Ú©Ø±Ø¯Ù‡">Ú©Ø§Ø±Ú©Ø±Ø¯Ù‡</option>
          <option value="Ø¯Ø± Ø­Ø¯ Ù†Ùˆ">Ø¯Ø± Ø­Ø¯ Ù†Ùˆ</option>
        </select>
        <input type="text" id="shopFilterBrand" placeholder="Ø¨Ø±Ù†Ø¯">
        <input type="text" id="shopFilterModel" placeholder="Ù…Ø¯Ù„">
        <input type="text" id="shopFilterProductionYear" placeholder="Ø³Ø§Ù„ ØªÙˆÙ„ÛŒØ¯">
        <input type="text" id="shopFilterPrice" placeholder="Ù‚ÛŒÙ…Øª">
        <input type="checkbox" id="shopNotify" name="shopNotify">
        <label for="shopNotify">Ø§Ø¹Ù„Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯</label>
        <button type="submit">ÙÛŒÙ„ØªØ± Ú©Ù†</button>
      </form>
    </div>
    <div id="shopAds"></div>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    // Import Firebase
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase Ø§Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³
    async function uploadImage(file, path) {
      if (!file) return '';
      const storageRef = ref(storage, path);
      await uploadBytes(storageRef, file);
      return await getDownloadURL(storageRef);
    }

    // Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¨Ø®Ø´â€ŒÙ‡Ø§
    function showSection(sectionId) {
      document.getElementById('mainSections').style.display = 'none';
      document.getElementById('toursSection').style.display = sectionId === 'tours' ? 'block' : 'none';
      document.getElementById('eventsSection').style.display = sectionId === 'events' ? 'block' : 'none';
      document.getElementById('shopSection').style.display = sectionId === 'shop' ? 'block' : 'none';
      if (sectionId === 'tours') loadTours();
      if (sectionId === 'events') loadEvents();
      if (sectionId === 'shop') loadShopItems();
    }

    // Ø¨Ø§Ø²/Ø¨Ø³ØªÙ† ÙØ±Ù…
    function toggleForm(containerId, button) {
      const container = document.getElementById(containerId);
      const form = container.querySelector('form');
      if (form.style.display === 'none') {
        form.style.display = 'block';
        container.classList.add('active');
        button.textContent = 'Ø¨Ø³ØªÙ†';
        button.classList.add('close');
      } else {
        form.style.display = 'none';
        container.classList.remove('active');
        button.textContent = 'Ø¨Ø§Ø² Ú©Ø±Ø¯Ù†';
        button.classList.remove('close');
      }
    }

    // Ø«Ø¨Øª ØªÙˆØ±
    const tourForm = document.getElementById('tourForm');
    tourForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const imageFile = document.getElementById('tourImage').files[0];
      let imageUrl = '';
      if (imageFile) {
        imageUrl = await uploadImage(imageFile, `tours/${Date.now()}_${imageFile.name}`);
      }
      const tourData = {
        tourName: document.getElementById('tourName').value || '',
        tripType: document.getElementById('tripType').value || '',
        leaderName: document.getElementById('leaderName').value || '',
        transport: document.getElementById('transport').value || '',
        origin: document.getElementById('origin').value || '',
        destination: document.getElementById('destination').value || '',
        startDate: document.getElementById('startDate').value || '',
        endDate: document.getElementById('endDate').value || '',
        capacity: document.getElementById('capacity').value || '',
        cost: document.getElementById('cost').value || '',
        extraCost: document.getElementById('extraCost').value || '',
        cardNumber: document.getElementById('cardNumber').value || '',
        cardHolder: document.getElementById('cardHolder').value || '',
        phone: document.getElementById('phone').value || '',
        description: document.getElementById('description').value || '',
        imageUrl: imageUrl
      };
      try {
        await addDoc(collection(db, "tours"), tourData);
        alert("ØªÙˆØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯!");
        tourForm.reset();
        toggleForm('tourFormContainer', tourFormContainer.querySelector('.toggle-form'));
        loadTours();
      } catch (error) {
        console.error("Ø®Ø·Ø§ ØªÙˆ Ø«Ø¨Øª ØªÙˆØ±:", error);
        alert("ÛŒÙ‡ Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø§ÙˆÙ…Ø¯! Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†.");
      }
    });

    // Ø«Ø¨Øª Ø§ÛŒÙˆÙ†Øª
    const eventForm = document.getElementById('eventForm');
    eventForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const imageFile = document.getElementById('eventImage').files[0];
      let imageUrl = '';
      if (imageFile) {
        imageUrl = await uploadImage(imageFile, `events/${Date.now()}_${imageFile.name}`);
      }
      const eventData = {
        eventType: document.getElementById('eventType').value || '',
        startDate: document.getElementById('eventStartDate').value || '',
        endDate: document.getElementById('eventEndDate').value || '',
        location: document.getElementById('location').value || '',
        capacity: document.getElementById('eventCapacity').value || '',
        cost: document.getElementById('eventCost').value || '',
        description: document.getElementById('eventDescription').value || '',
        imageUrl: imageUrl
      };
      try {
        await addDoc(collection(db, "events"), eventData);
        alert("Ø§ÛŒÙˆÙ†Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯!");
        eventForm.reset();
        toggleForm('eventFormContainer', eventFormContainer.querySelector('.toggle-form'));
        loadEvents();
      } catch (error) {
        console.error("Ø®Ø·Ø§ ØªÙˆ Ø«Ø¨Øª Ø§ÛŒÙˆÙ†Øª:", error);
        alert("ÛŒÙ‡ Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø§ÙˆÙ…Ø¯! Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†.");
      }
    });

    // Ø«Ø¨Øª Ù…Ø­ØµÙˆÙ„ ÙØ±ÙˆØ´Ú¯Ø§Ù‡
    const shopForm = document.getElementById('shopForm');
    shopForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const imageFile = document.getElementById('shopImage').files[0];
      let imageUrl = '';
      if (imageFile) {
        imageUrl = await uploadImage(imageFile, `shop/${Date.now()}_${imageFile.name}`);
      }
      const shopData = {
        condition: document.getElementById('productCondition').value || '',
        brand: document.getElementById('brand').value || '',
        model: document.getElementById('model').value || '',
        productionYear: document.getElementById('productionYear').value || '',
        price: document.getElementById('price').value || '',
        description: document.getElementById('shopDescription').value || '',
        imageUrl: imageUrl
      };
      try {
        await addDoc(collection(db, "shop"), shopData);
        alert("Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯!");
        shopForm.reset();
        toggleForm('shopFormContainer', shopFormContainer.querySelector('.toggle-form'));
        loadShopItems();
      } catch (error) {
        console.error("Ø®Ø·Ø§ ØªÙˆ Ø«Ø¨Øª Ù…Ø­ØµÙˆÙ„:", error);
        alert("ÛŒÙ‡ Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø§ÙˆÙ…Ø¯! Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†.");
      }
    });

    // Ù†Ù…Ø§ÛŒØ´ ØªÙˆØ±Ù‡Ø§
    async function loadTours(filters = {}) {
      const tourAds = document.getElementById('tourAds');
      tourAds.innerHTML = '';
      let q = collection(db, "tours");
      if (filters.tourName) q = query(q, where("tourName", "==", filters.tourName));
      if (filters.tripType) q = query(q, where("tripType", "==", filters.tripType));
      if (filters.leaderName) q = query(q, where("leaderName", "==", filters.leaderName));
      if (filters.transport) q = query(q, where("transport", "==", filters.transport));
      if (filters.origin) q = query(q, where("origin", "==", filters.origin));
      if (filters.destination) q = query(q, where("destination", "==", filters.destination));
      if (filters.startDate) q = query(q, where("startDate", "==", filters.startDate));
      if (filters.endDate) q = query(q, where("endDate", "==", filters.endDate));
      if (filters.capacity) q = query(q, where("capacity", "==", filters.capacity));
      if (filters.cost) q = query(q, where("cost", "==", filters.cost));
      try {
        const querySnapshot = await getDocs(q);
        querySnapshot.forEach((doc) => {
          const tour = doc.data();
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            ${tour.imageUrl ? `<img src="${tour.imageUrl}" alt="ØªØµÙˆÛŒØ± ØªÙˆØ±">` : ''}
            <h3>${tour.tourName || 'Ø¨Ø¯ÙˆÙ† Ù†Ø§Ù…'}</h3>
            <p>Ù†ÙˆØ¹ Ø³ÙØ±: ${tour.tripType || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ù„ÛŒØ¯Ø±: ${tour.leaderName || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>ÙˆØ³ÛŒÙ„Ù‡: ${tour.transport || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ù…Ø¨Ø¯Ø§: ${tour.origin || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ù…Ù‚ØµØ¯: ${tour.destination || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>ØªØ§Ø±ÛŒØ® Ø±ÙØª: ${tour.startDate || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>ØªØ§Ø±ÛŒØ® Ø¨Ø±Ú¯Ø´Øª: ${tour.endDate || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ø¸Ø±ÙÛŒØª: ${tour.capacity || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ù‡Ø²ÛŒÙ†Ù‡: ${tour.cost || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'} ØªÙˆÙ…Ø§Ù†</p>
            <p>Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø¶Ø§ÙÛŒ: ${tour.extraCost || '0'} ØªÙˆÙ…Ø§Ù†</p>
            <p>Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª: ${tour.cardNumber || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ø¨Ù‡ Ù†Ø§Ù…: ${tour.cardHolder || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>ØªÙ„ÙÙ†: ${tour.phone || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>ØªÙˆØ¶ÛŒØ­Ø§Øª: ${tour.description || 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­'}</p>
          `;
          tourAds.appendChild(card);
        });
      } catch (error) {
        console.error("Ø®Ø·Ø§ ØªÙˆ Ù„ÙˆØ¯ ØªÙˆØ±Ù‡Ø§:", error);
      }
    }

    // Ù†Ù…Ø§ÛŒØ´ Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§
    async function loadEvents(filters = {}) {
      const eventAds = document.getElementById('eventAds');
      eventAds.innerHTML = '';
      let q = collection(db, "events");
      if (filters.eventType) q = query(q, where("eventType", "==", filters.eventType));
      if (filters.startDate) q = query(q, where("startDate", "==", filters.startDate));
      if (filters.endDate) q = query(q, where("endDate", "==", filters.endDate));
      if (filters.location) q = query(q, where("location", "==", filters.location));
      if (filters.capacity) q = query(q, where("capacity", "==", filters.capacity));
      if (filters.cost) q = query(q, where("cost", "==", filters.cost));
      try {
        const querySnapshot = await getDocs(q);
        querySnapshot.forEach((doc) => {
          const event = doc.data();
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            ${event.imageUrl ? `<img src="${event.imageUrl}" alt="ØªØµÙˆÛŒØ± Ø§ÛŒÙˆÙ†Øª">` : ''}
            <h3>${event.eventType || 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†'}</h3>
            <p>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹: ${event.startDate || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†: ${event.endDate || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ù…Ú©Ø§Ù†: ${event.location || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ø¸Ø±ÙÛŒØª: ${event.capacity || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ù‡Ø²ÛŒÙ†Ù‡: ${event.cost || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'} ØªÙˆÙ…Ø§Ù†</p>
            <p>ØªÙˆØ¶ÛŒØ­Ø§Øª: ${event.description || 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­'}</p>
          `;
          eventAds.appendChild(card);
        });
      } catch (error) {
        console.error("Ø®Ø·Ø§ ØªÙˆ Ù„ÙˆØ¯ Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§:", error);
      }
    }

    // Ù†Ù…Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„Ø§Øª ÙØ±ÙˆØ´Ú¯Ø§Ù‡
    async function loadShopItems(filters = {}) {
      const shopAds = document.getElementById('shopAds');
      shopAds.innerHTML = '';
      let q = collection(db, "shop");
      if (filters.condition) q = query(q, where("condition", "==", filters.condition));
      if (filters.brand) q = query(q, where("brand", "==", filters.brand));
      if (filters.model) q = query(q, where("model", "==", filters.model));
      if (filters.productionYear) q = query(q, where("productionYear", "==", filters.productionYear));
      if (filters.price) q = query(q, where("price", "==", filters.price));
      try {
        const querySnapshot = await getDocs(q);
        querySnapshot.forEach((doc) => {
          const item = doc.data();
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            ${item.imageUrl ? `<img src="${item.imageUrl}" alt="ØªØµÙˆÛŒØ± Ù…Ø­ØµÙˆÙ„">` : ''}
            <h3>${item.brand || 'Ø¨Ø¯ÙˆÙ† Ø¨Ø±Ù†Ø¯'} ${item.model || ''}</h3>
            <p>ÙˆØ¶Ø¹ÛŒØª: ${item.condition || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ø³Ø§Ù„ ØªÙˆÙ„ÛŒØ¯: ${item.productionYear || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'}</p>
            <p>Ù‚ÛŒÙ…Øª: ${item.price || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'} ØªÙˆÙ…Ø§Ù†</p>
            <p>ØªÙˆØ¶ÛŒØ­Ø§Øª: ${item.description || 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­'}</p>
          `;
          shopAds.appendChild(card);
        });
      } catch (error) {
        console.error("Ø®Ø·Ø§ ØªÙˆ Ù„ÙˆØ¯ Ù…Ø­ØµÙˆÙ„Ø§Øª:", error);
      }
    }

    // ÙÛŒÙ„ØªØ± ØªÙˆØ±Ù‡Ø§
    const tourFilterForm = document.getElementById('tourFilterForm');
    tourFilterForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const filters = {
        tourName: document.getElementById('tourFilterName').value || '',
        tripType: document.getElementById('tourFilterType').value || '',
        leaderName: document.getElementById('tourFilterLeader').value || '',
        transport: document.getElementById('tourFilterTransport').value || '',
        origin: document.getElementById('tourFilterOrigin').value || '',
        destination: document.getElementById('tourFilterDestination').value || '',
        startDate: document.getElementById('tourFilterStartDate').value || '',
        endDate: document.getElementById('tourFilterEndDate').value || '',
        capacity: document.getElementById('tourFilterCapacity').value || '',
        cost: document.getElementById('tourFilterCost').value || ''
      };
      loadTours(filters);
    });

    // ÙÛŒÙ„ØªØ± Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§
    const eventFilterForm = document.getElementById('eventFilterForm');
    eventFilterForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const filters = {
        eventType: document.getElementById('eventFilterType').value || '',
        startDate: document.getElementById('eventFilterStartDate').value || '',
        endDate: document.getElementById('eventFilterEndDate').value || '',
        location: document.getElementById('eventFilterLocation').value || '',
        capacity: document.getElementById('eventFilterCapacity').value || '',
        cost: document.getElementById('eventFilterCost').value || ''
      };
      loadEvents(filters);
    });

    // ÙÛŒÙ„ØªØ± Ù…Ø­ØµÙˆÙ„Ø§Øª ÙØ±ÙˆØ´Ú¯Ø§Ù‡
    const shopFilterForm = document.getElementById('shopFilterForm');
    shopFilterForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const filters = {
        condition: document.getElementById('shopFilterCondition').value || '',
        brand: document.getElementById('shopFilterBrand').value || '',
        model: document.getElementById('shopFilterModel').value || '',
        productionYear: document.getElementById('shopFilterProductionYear').value || '',
        price: document.getElementById('shopFilterPrice').value || ''
      };
      loadShopItems(filters);
    });

    // Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¨Ø±Ø§ÛŒ ØªÙˆØ±Ù‡Ø§
    const tourNotifyCheckbox = document.getElementById('tourNotify');
    tourNotifyCheckbox.addEventListener('change', () => {
      if (tourNotifyCheckbox.checked) {
        const filters = {
          tourName: document.getElementById('tourFilterName').value || '',
          tripType: document.getElementById('tourFilterType').value || '',
          leaderName: document.getElementById('tourFilterLeader').value || '',
          transport: document.getElementById('tourFilterTransport').value || '',
          origin: document.getElementById('tourFilterOrigin').value || '',
          destination: document.getElementById('tourFilterDestination').value || '',
          startDate: document.getElementById('tourFilterStartDate').value || '',
          endDate: document.getElementById('tourFilterEndDate').value || '',
          capacity: document.getElementById('tourFilterCapacity').value || '',
          cost: document.getElementById('tourFilterCost').value || ''
        };
        let q = collection(db, "tours");
        if (filters.tourName) q = query(q, where("tourName", "==", filters.tourName));
        if (filters.tripType) q = query(q, where("tripType", "==", filters.tripType));
        if (filters.leaderName) q = query(q, where("leaderName", "==", filters.leaderName));
        if (filters.transport) q = query(q, where("transport", "==", filters.transport));
        if (filters.origin) q = query(q, where("origin", "==", filters.origin));
        if (filters.destination) q = query(q, where("destination", "==", filters.destination));
        if (filters.startDate) q = query(q, where("startDate", "==", filters.startDate));
        if (filters.endDate) q = query(q, where("endDate", "==", filters.endDate));
        if (filters.capacity) q = query(q, where("capacity", "==", filters.capacity));
        if (filters.cost) q = query(q, where("cost", "==", filters.cost));
        onSnapshot(q, (snapshot) => {
          snapshot.docChanges().forEach((change) => {
            if (change.type === "added") {
              const tour = change.doc.data();
              new Notification('ØªÙˆØ± Ø¬Ø¯ÛŒØ¯!', {
                body: `ØªÙˆØ± ${tour.tourName || 'Ø¨Ø¯ÙˆÙ† Ù†Ø§Ù…'} Ø¨Ù‡ Ù…Ù‚ØµØ¯ ${tour.destination || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'} Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯!`
              });
            }
          });
        });
      }
    });

    // Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§
    const eventNotifyCheckbox = document.getElementById('eventNotify');
    eventNotifyCheckbox.addEventListener('change', () => {
      if (eventNotifyCheckbox.checked) {
        const filters = {
          eventType: document.getElementById('eventFilterType').value || '',
          startDate: document.getElementById('eventFilterStartDate').value || '',
          endDate: document.getElementById('eventFilterEndDate').value || '',
          location: document.getElementById('eventFilterLocation').value || '',
          capacity: document.getElementById('eventFilterCapacity').value || '',
          cost: document.getElementById('eventFilterCost').value || ''
        };
        let q = collection(db, "events");
        if (filters.eventType) q = query(q, where("eventType", "==", filters.eventType));
        if (filters.startDate) q = query(q, where("startDate", "==", filters.startDate));
        if (filters.endDate) q = query(q, where("endDate", "==", filters.endDate));
        if (filters.location) q = query(q, where("location", "==", filters.location));
        if (filters.capacity) q = query(q, where("capacity", "==", filters.capacity));
        if (filters.cost) q = query(q, where("cost", "==", filters.cost));
        onSnapshot(q, (snapshot) => {
          snapshot.docChanges().forEach((change) => {
            if (change.type === "added") {
              const event = change.doc.data();
              new Notification('Ø§ÛŒÙˆÙ†Øª Ø¬Ø¯ÛŒØ¯!', {
                body: `Ø§ÛŒÙˆÙ†Øª ${event.eventType || 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†'} Ø¯Ø± ${event.location || 'Ù…Ø´Ø®Øµ Ù†Ø´Ø¯Ù‡'} Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯!`
              });
            }
          });
        });
      }
    });

    // Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¨Ø±Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª ÙØ±ÙˆØ´Ú¯Ø§Ù‡
    const shopNotifyCheckbox = document.getElementById('shopNotify');
    shopNotifyCheckbox.addEventListener('change', () => {
      if (shopNotifyCheckbox.checked) {
        const filters = {
          condition: document.getElementById('shopFilterCondition').value || '',
          brand: document.getElementById('shopFilterBrand').value || '',
          model: document.getElementById('shopFilterModel').value || '',
          productionYear: document.getElementById('shopFilterProductionYear').value || '',
          price: document.getElementById('shopFilterPrice').value || ''
        };
        let q = collection(db, "shop");
        if (filters.condition) q = query(q, where("condition", "==", filters.condition));
        if (filters.brand) q = query(q, where("brand", "==", filters.brand));
        if (filters.model) q = query(q, where("model", "==", filters.model));
        if (filters.productionYear) q = query(q, where("productionYear", "==", filters.productionYear));
        if (filters.price) q = query(q, where("price", "==", filters.price));
        onSnapshot(q, (snapshot) => {
          snapshot.docChanges().forEach((change) => {
            if (change.type === "added") {
              const item = change.doc.data();
              new Notification('Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯!', {
                body: `Ù…Ø­ØµÙˆÙ„ ${item.brand || 'Ø¨Ø¯ÙˆÙ† Ø¨Ø±Ù†Ø¯'} ${item.model || ''} Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯!`
              });
            }
          });
        });
      }
    });

    // ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ
    document.querySelectorAll('.persian-date').forEach(input => {
      input.addEventListener('focus', () => {
        const persianDate = new persianDate();
        input.value = persianDate.format('YYYY/MM/DD');
      });
    });

    // Ù„ÙˆØ¯ Ø§ÙˆÙ„ÛŒÙ‡ ØµÙØ­Ù‡
  </script>
</body>
</html>
