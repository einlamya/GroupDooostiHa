<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ú¯Ø±ÙˆÙ‡ Ø¯ÙˆØ³ØªÛŒâ€ŒÙ‡Ø§</title>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@persian-tools/persian-fonts@1.0.0/dist/IRANSans.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Vazir:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/css/persian-datepicker.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/persian-date@1.1.0/dist/persian-date.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/js/persian-datepicker.min.js"></script>
    <style>
        body {
            font-family: 'IRANSans', 'Vazir', Arial, sans-serif;
            text-align: center;
            direction: rtl;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        h1, h2 {
            color: #333;
        }
        .category {
            margin: 20px auto;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            justify-items: center;
            max-width: 600px;
        }
        .category button {
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            width: 30%;
            max-width: 165px;
            box-sizing: border-box;
        }
        .category button:hover {
            background-color: #45a049;
        }
        .slogan {
            font-family: 'IRANSans', 'Vazir', sans-serif;
            font-size: 16px;
            color: #666;
            margin-top: 10px;
            font-weight: 700;
        }
        .form-card, .ad-card {
            width: 33%;
            margin: 10px auto;
            background-color: #fff;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
            cursor: pointer;
            text-align: right;
            transition: max-height 0.3s ease-out, opacity 0.2s ease;
            overflow: hidden;
            max-height: 60px;
            opacity: 1;
        }
        .form-card .content {
            display: block;
            font-size: 14px;
            text-align: center;
            margin: 0 auto;
            padding: 10px;
        }
        .ad-card .content {
            display: block;
            font-size: 14px;
            text-align: right;
            margin: 0 auto;
            padding: 10px;
        }
        .form-card .form-content, .ad-card .expanded-content {
            display: none;
            margin-top: 10px;
            text-align: right;
        }
        .form-card.expanded {
            max-height: 600px; /* Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ ÙØ±Ù…â€ŒÙ‡Ø§ÛŒ Ø¨Ù„Ù†Ø¯ */
            padding: 20px;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
        }
        .form-card.expanded .content {
            display: none;
        }
        .form-card.expanded .form-content {
            display: block;
        }
        #travel-ads, #event-ads, #shop-ads {
            display: none;
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            margin-top: 20px;
            text-align: right;
            margin-left: auto;
            margin-right: auto;
        }
        #travel-ads-list, #event-ads-list, #shop-ads-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }
        .form-group {
            margin: 10px 0;
            text-align: right;
        }
        .form-group label {
            display: block;
            font-size: 16px;
            margin-bottom: 5px;
        }
        .form-group input, .form-group textarea, .form-group select {
            width: 90%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box;
        }
        .form-group input::placeholder {
            color: #999;
        }
        #submit-travel, #submit-event, #submit-shop {
            background-color: #008CBA;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        #submit-travel:hover, #submit-event:hover, #submit-shop:hover {
            background-color: #007399;
        }
        .ad-card img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 5px;
            float: right;
            margin-left: 10px;
        }
        .ad-card .expanded-img {
            width: 100%;
            height: auto;
            border-radius: 5px;
            margin-top: 10px;
        }
        .contact-link {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            margin-top: 15px;
        }
        .contact-link img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-left: 10px;
        }
        .contact-link a {
            color: #008CBA;
            text-decoration: none;
            margin-left: 5px;
        }
        .contact-link a:hover {
            text-decoration: underline;
        }
        .reset-button {
            background-color: #f44336;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .reset-button:hover {
            background-color: #d32f2f;
        }
        @media (max-width: 768px) {
            .category {
                grid-template-columns: 1fr;
            }
            .category button {
                width: 50%;
                max-width: 200px;
            }
            .form-card, .ad-card {
                width: 100%;
            }
            #travel-ads, #event-ads, #shop-ads {
                max-width: 100%;
            }
            .ad-card {
                flex: 0 0 calc(100% - 10px);
            }
            .ad-card.expanded {
                flex: 0 0 90%;
            }
            body {
                font-family: 'Vazir', Arial, sans-serif;
            }
        }
    </style>
</head>
<body>
    <h1>ğŸ§³ Ú¯Ø±ÙˆÙ‡ Ø¯ÙˆØ³ØªÛŒâ€ŒÙ‡Ø§</h1>
    <div class="category">
        <button onclick="toggleSection('event')">ğŸ«‚ Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§</button>
        <button onclick="toggleSection('travel')">ğŸ•ï¸ ØªÙˆØ±Ù‡Ø§</button>
        <button onclick="toggleSection('shop')">ğŸ›ï¸ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</button>
    </div>
    <p class="slogan">Ø¯ÙˆØ³ØªÛŒâ€ŒÙ‡Ø§ Ø§Ø² Ø§ÛŒÙ†Ø¬Ø§ Ø¢ØºØ§Ø² Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</p>
    <div id="travel-form-card" class="form-card" style="display: none;">
        <div class="content">
            <strong id="travel-toggle">ğŸ“ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ ØªÙˆØ±</strong>
        </div>
        <div class="form-content">
            <h2>ğŸ•ï¸ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ ØªÙˆØ±Ù‡Ø§</h2>
            <form id="travel-form">
                <div class="form-group">
                    <label>Ù†Ø§Ù… Ø¨Ø±Ú¯Ø²Ø§Ø±Ú©Ù†Ù†Ø¯Ù‡ (Ù†Ø§Ù… ØªÙˆØ±):</label>
                    <input type="text" id="travel-organizer" placeholder="Ù…Ø«Ù„Ø§Ù‹: ØªÙˆØ± Ø·Ø¨ÛŒØ¹Øª Ú¯Ø±Ø¯ÛŒ">
                </div>
                <div class="form-group">
                    <label>Ù†ÙˆØ¹ Ø³ÙØ±:</label>
                    <select id="travel-type">
                        <option value="Ø¯Ø§Ø®Ù„ÛŒ">Ø¯Ø§Ø®Ù„ÛŒ</option>
                        <option value="Ø®Ø§Ø±Ø¬ÛŒ">Ø®Ø§Ø±Ø¬ÛŒ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ù†Ø§Ù… Ù„ÛŒØ¯Ø±:</label>
                    <input type="text" id="travel-leader" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¹Ù„ÛŒ Ø§Ú©Ø¨Ø±ÛŒ">
                </div>
                <div class="form-group">
                    <label>ÙˆØ³ÛŒÙ„Ù‡ Ø³ÙØ±:</label>
                    <select id="travel-vehicle">
                        <option value="Ø®ÙˆØ¯Ø±Ùˆ Ø´Ø®ØµÛŒ">Ø®ÙˆØ¯Ø±Ùˆ Ø´Ø®ØµÛŒ</option>
                        <option value="Ø§ØªÙˆØ¨ÙˆØ³">Ø§ØªÙˆØ¨ÙˆØ³</option>
                        <option value="Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§">Ù‡ÙˆØ§Ù¾ÛŒÙ…Ø§</option>
                        <option value="Ù‡ÛŒÚ†â€ŒÙ‡Ø§ÛŒÚ©">Ù‡ÛŒÚ†â€ŒÙ‡Ø§ÛŒÚ©</option>
                        <option value="Ø³Ø§ÛŒØ±">Ø³Ø§ÛŒØ±</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ù…Ø¨Ø¯Ø§:</label>
                    <input type="text" id="travel-origin" placeholder="Ù…Ø«Ù„Ø§Ù‹: ØªÙ‡Ø±Ø§Ù†">
                </div>
                <div class="form-group">
                    <label>Ù…Ù‚ØµØ¯:</label>
                    <input type="text" id="travel-destination" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø´ÛŒØ±Ø§Ø²">
                </div>
                <div class="form-group">
                    <label>ØªØ§Ø±ÛŒØ® Ø±ÙØª:</label>
                    <input type="text" id="travel-departure" class="persian-date">
                </div>
                <div class="form-group">
                    <label>ØªØ§Ø±ÛŒØ® Ø¨Ø±Ú¯Ø´Øª:</label>
                    <input type="text" id="travel-return" class="persian-date">
                </div>
                <div class="form-group">
                    <label>Ø¸Ø±ÙÛŒØª Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡:</label>
                    <input type="text" id="travel-capacity" placeholder="Ù…Ø«Ù„Ø§Ù‹: 4 Ù†ÙØ±">
                </div>
                <div class="form-group">
                    <label>Ù‡Ø²ÛŒÙ†Ù‡:</label>
                    <input type="text" id="travel-cost" placeholder="Ù…Ø«Ù„Ø§Ù‹: 1,000,000 ØªÙˆÙ…Ø§Ù†">
                </div>
                <div class="form-group">
                    <label>Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø¶Ø§ÙÛŒ:</label>
                    <input type="text" id="travel-extra-cost" placeholder="Ø¯Ù†Ú¯ Ø®ÙˆØ¯Ø±Ùˆ/ ÙˆØ±ÙˆØ¯ÛŒ ...">
                </div>
                <div class="form-group">
                    <label>Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª ÙˆØ§Ø±ÛŒØ²ÛŒ:</label>
                    <input type="text" id="travel-card" placeholder="6037-6037-6037-6037">
                </div>
                <div class="form-group">
                    <label>Ø¨Ù‡ Ù†Ø§Ù…:</label>
                    <input type="text" id="travel-owner" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¹Ù„ÛŒ Ø§Ú©Ø¨Ø±ÛŒ">
                </div>
                <div class="form-group">
                    <label>ØªÙ„ÙÙ† Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ:</label>
                    <input type="text" id="travel-phone" placeholder="Ù…Ø«Ù„Ø§Ù‹: 09123456789">
                </div>
                <div class="form-group">
                    <label>ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨ÛŒØ´ØªØ±:</label>
                    <textarea id="travel-description" placeholder="Ù…Ø«Ù„Ø§Ù‹: ØªÙˆØ± Ø´Ø§Ù…Ù„ ØµØ¨Ø­Ø§Ù†Ù‡ Ø§Ø³Øª..."></textarea>
                </div>
                <div class="form-group">
                    <label>ØªØµÙˆÛŒØ± (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):</label>
                    <input type="file" id="travel-image" accept="image/*">
                </div>
                <button type="button" id="submit-travel">âœ… Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ</button>
                <button type="button" class="reset-button" id="reset-travel">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>
    <div id="event-form-card" class="form-card" style="display: none;">
        <div class="content">
            <strong id="event-toggle">ğŸ“ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ Ø§ÛŒÙˆÙ†Øª</strong>
        </div>
        <div class="form-content">
            <h2>ğŸ«‚ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ Ø§ÛŒÙˆÙ†Øª</h2>
            <form id="event-form">
                <div class="form-group">
                    <label>Ø¹Ù†ÙˆØ§Ù†:</label>
                    <select id="event-title">
                        <option value="Ø¯ÙˆØ±Ù‡Ù…ÛŒ">Ø¯ÙˆØ±Ù‡Ù…ÛŒ (Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ±ÙˆÛŒØŒ Ú©Ø§ÙÙ‡ØŒ Ù¾Ø§Ø±Ú©ØŒ Ø³ÛŒÙ†Ù…Ø§...)</option>
                        <option value="ÙˆØ±Ø²Ø´">ÙˆØ±Ø²Ø´ (Ú©ÙˆÙ‡â€ŒÙ¾ÛŒÙ…Ø§ÛŒÛŒØŒ Ø¨Ø¯Ù…ÛŒÙ†ØªÙˆÙ†ØŒ Ø¯ÙˆÚ†Ø±Ø®Ù‡â€ŒØ³ÙˆØ§Ø±ÛŒ...)</option>
                        <option value="Ú©Ù…Ù¾ Ùˆ Ø³ÙØ±">Ú©Ù…Ù¾ Ùˆ Ø³ÙØ± (Ø¯Ø§Ø®Ù„ÛŒØŒ Ø®Ø§Ø±Ø¬ÛŒØŒ Ø¢Ø¨Ø´Ø§Ø±ØŒ Ø¯Ø´Øª...)</option>
                        <option value="Ù‡Ù…â€ŒÙ…Ø³ÛŒØ±">Ù‡Ù…â€ŒÙ…Ø³ÛŒØ± (Ø´ÛŒØ±Ø§Ø² Ø¨Ù‡ Ø§ØµÙÙ‡Ø§Ù†ØŒ ÙˆÙ†Ú© Ø¨Ù‡ ØµØ§Ø¯Ù‚ÛŒÙ‡...)</option>
                        <option value="Ø¯ÛŒÙˆØ§Ø± Ø¯ÙˆØ³ØªÛŒ">Ø¯ÛŒÙˆØ§Ø± Ø¯ÙˆØ³ØªÛŒ (ÙˆØ§Ú¯Ø°Ø§Ø±ÛŒ ÛŒØ®Ú†Ø§Ù„ØŒ Ú©ØªØ§Ø¨...)</option>
                        <option value="Ø¯Ø§ÙˆØ·Ù„Ø¨Ø§Ù†Ù‡">Ø¯Ø§ÙˆØ·Ù„Ø¨Ø§Ù†Ù‡ (Ø¢Ù…ÙˆØ²Ø´ØŒ Ù…Ø´ÙˆØ±Øª...)</option>
                        <option value="ÙˆØ§Ú¯Ø°Ø§Ø±ÛŒ">ÙˆØ§Ú¯Ø°Ø§Ø±ÛŒ (Ø­ÛŒÙˆØ§Ù† Ø®Ø§Ù†Ú¯ÛŒØŒ Ø¨Ù„ÛŒØ·...)</option>
                        <option value="Ù…Ø´Ø§ÙˆØ±Ù‡ Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ">Ù…Ø´Ø§ÙˆØ±Ù‡ Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ (Ù¾Ø²Ø´Ú©ÛŒØŒ ÙˆØ§Ù…...)</option>
                        <option value="Ù…ØªÙØ±Ù‚Ù‡">Ù…ØªÙØ±Ù‚Ù‡ (Ø§Ø³ØªØ®Ø¯Ø§Ù…ØŒ Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø± Ø®Ø§Ù†Ú¯ÛŒ...)</option>
                        <option value="Ø³Ø§ÛŒØ±...">Ø³Ø§ÛŒØ±...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹:</label>
                    <input type="text" id="event-date" class="persian-date">
                </div>
                <div class="form-group">
                    <label>ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†:</label>
                    <input type="text" id="event-end-date" class="persian-date">
                </div>
                <div class="form-group">
                    <label>Ù…Ú©Ø§Ù†:</label>
                    <input type="text" id="event-location" placeholder="Ù…Ø«Ù„Ø§Ù‹: ØªÙ‡Ø±Ø§Ù†ØŒ Ù¾Ø§Ø±Ú© Ù…Ù„Øª">
                </div>
                <div class="form-group">
                    <label>Ø¸Ø±ÙÛŒØª:</label>
                    <input type="text" id="event-capacity" placeholder="Ù…Ø«Ù„Ø§Ù‹: 50 Ù†ÙØ±">
                </div>
                <div class="form-group">
                    <label>Ù‡Ø²ÛŒÙ†Ù‡:</label>
                    <input type="text" id="event-cost" placeholder="Ù…Ø«Ù„Ø§Ù‹: 500,000 ØªÙˆÙ…Ø§Ù†">
                </div>
                <div class="form-group">
                    <label>ØªÙˆØ¶ÛŒØ­ Ø¨ÛŒØ´ØªØ±:</label>
                    <textarea id="event-description" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ù…ÙˆØ³ÛŒÙ‚ÛŒ..."></textarea>
                </div>
                <div class="form-group">
                    <label>ØªØµÙˆÛŒØ± (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):</label>
                    <input type="file" id="event-image" accept="image/*">
                </div>
                <button type="button" id="submit-event">âœ… Ø«Ø¨Øª Ø§ÛŒÙˆÙ†Øª</button>
                <button type="button" class="reset-button" id="reset-event">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>
    <div id="shop-form-card" class="form-card" style="display: none;">
        <div class="content">
            <strong id="shop-toggle">ğŸ“ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</strong>
        </div>
        <div class="form-content">
            <h2>ğŸ›ï¸ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h2>
            <form id="shop-form">
                <div class="form-group">
                    <label>ÙˆØ¶Ø¹ÛŒØª Ù…Ø­ØµÙˆÙ„:</label>
                    <select id="shop-status">
                        <option value="Ù†Ùˆ">Ù†Ùˆ</option>
                        <option value="Ú©Ø§Ø±Ú©Ø±Ø¯Ù‡">Ú©Ø§Ø±Ú©Ø±Ø¯Ù‡</option>
                        <option value="Ø¯Ø± Ø­Ø¯ Ù†Ùˆ">Ø¯Ø± Ø­Ø¯ Ù†Ùˆ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ø¨Ø±Ù†Ø¯ Ú©Ø§Ù„Ø§:</label>
                    <input type="text" id="shop-brand" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø³Ø§Ù…Ø³ÙˆÙ†Ú¯">
                </div>
                <div class="form-group">
                    <label>Ù…Ø¯Ù„:</label>
                    <input type="text" id="shop-model" placeholder="Ù…Ø«Ù„Ø§Ù‹: Galaxy S21">
                </div>
                <div class="form-group">
                    <label>Ø³Ø§Ù„ ØªÙˆÙ„ÛŒØ¯:</label>
                    <input type="text" id="shop-year" placeholder="Ù…Ø«Ù„Ø§Ù‹: 1399">
                </div>
                <div class="form-group">
                    <label>Ù‚ÛŒÙ…Øª:</label>
                    <input type="text" id="shop-price" placeholder="Ù…Ø«Ù„Ø§Ù‹: 2,000,000 ØªÙˆÙ…Ø§Ù†">
                </div>
                <div class="form-group">
                    <label>ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨ÛŒØ´ØªØ±:</label>
                    <textarea id="shop-description" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¨Ø§ Ú¯Ø§Ø±Ø§Ù†ØªÛŒ..."></textarea>
                </div>
                <div class="form-group">
                    <label>ØªØµÙˆÛŒØ± (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):</label>
                    <input type="file" id="shop-image" accept="image/*">
                </div>
                <button type="button" id="submit-shop">âœ… Ø«Ø¨Øª Ù…Ø­ØµÙˆÙ„</button>
                <button type="button" class="reset-button" id="reset-shop">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>
    <div id="travel-ads">
        <h2>ğŸ•ï¸ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ ØªÙˆØ±Ù‡Ø§</h2>
        <div id="travel-ads-list"></div>
    </div>
    <div id="event-ads">
        <h2>ğŸ«‚ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙˆÙ†Øªâ€ŒÙ‡Ø§</h2>
        <div id="event-ads-list"></div>
    </div>
    <div id="shop-ads">
        <h2>ğŸ›ï¸ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h2>
        <div id="shop-ads-list"></div>
    </div>
    <script type="module">
        // ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† ØªÙˆØ§Ø¨Ø¹ Firebase
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, orderBy, query } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js';

        let db;
        let storage;
        let isFirebaseReady = false;
        let userInfo = null;
        let currentExpandedCard = null;

        // ØªÙ†Ø¸ÛŒÙ… ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ
        function initializeDatePicker() {
            if (typeof jQuery === 'undefined') {
                console.error("jQuery is not loaded.");
                return;
            }
            if (typeof persianDate === 'undefined' || typeof persianDatepicker === 'undefined') {
                console.error("Persian Date or Datepicker library not loaded.");
                return;
            }

            const today = new persianDate().format('YYYY/MM/DD');
            jQuery('.persian-date').each(function() {
                jQuery(this).persianDatepicker({
                    initialValue: today,
                    format: 'YYYY/MM/DD',
                    autoClose: true,
                    toolbox: {
                        calendarSwitch: {
                            enabled: false
                        }
                    }
                });
            });
        }

        // Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ù„ÙˆØ¯ Ø´Ø¯Ù† Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ ØªØ§Ø¨Ø¹
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(initializeDatePicker, 500); // ØªØ§Ø®ÛŒØ± Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ù„ÙˆØ¯ Ø´Ø¯Ù† Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§
        });

        // ØªØ¹Ø±ÛŒÙ ØªØ§Ø¨Ø¹ toggleSection
        window.toggleSection = function(section) {
            const travelFormCard = document.getElementById('travel-form-card');
            const eventFormCard = document.getElementById('event-form-card');
            const shopFormCard = document.getElementById('shop-form-card');
            const travelAds = document.getElementById('travel-ads');
            const eventAds = document.getElementById('event-ads');
            const shopAds = document.getElementById('shop-ads');

            // Ø¨Ø³ØªÙ† Ù‡Ù…Ù‡ ÙØ±Ù…â€ŒÙ‡Ø§ Ùˆ Ø¨Ø®Ø´â€ŒÙ‡Ø§
            travelFormCard.style.display = 'none';
            eventFormCard.style.display = 'none';
            shopFormCard.style.display = 'none';
            travelAds.style.display = 'none';
            eventAds.style.display = 'none';
            shopAds.style.display = 'none';

            // Ù†Ù…Ø§ÛŒØ´ Ø¨Ø®Ø´ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±
            if (section === 'travel') {
                travelFormCard.style.display = 'block';
                travelAds.style.display = 'block';
                loadTravelAds();
            } else if (section === 'event') {
                eventFormCard.style.display = 'block';
                eventAds.style.display = 'block';
                loadEventAds();
            } else if (section === 'shop') {
                shopFormCard.style.display = 'block';
                shopAds.style.display = 'block';
                loadShopAds();
            }
        };

        // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø¨Ø³ØªÙ† Ú©Ø§Ø±Øª Ø¨Ø§Ø² Ù‚Ø¨Ù„ÛŒ
        function closeCurrentExpandedCard() {
            if (currentExpandedCard) {
                currentExpandedCard.classList.remove('expanded');
                const content = currentExpandedCard.querySelector('.content');
                const expandedContent = currentExpandedCard.querySelector('.form-content');
                content.style.display = 'block';
                expandedContent.style.display = 'none';
                currentExpandedCard = null;
            }
        }

        // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ toggle Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ ÙÙ‚Ø· Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¹Ù†ÙˆØ§Ù†
        function toggleCard(cardId, toggleElementId) {
            const card = document.getElementById(cardId);
            const isExpanded = card.classList.contains('expanded');
            const content = card.querySelector('.content');
            const expandedContent = card.querySelector('.form-content');
            const toggleElement = document.getElementById(toggleElementId);

            if (!isExpanded) {
                closeCurrentExpandedCard();
                card.classList.add('expanded');
                toggleElement.style.cursor = 'pointer';
            } else {
                card.classList.remove('expanded');
                toggleElement.style.cursor = 'pointer';
            }
        }

        // ØªÙ†Ø¸ÛŒÙ… Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¹Ù†ÙˆØ§Ù† Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
        document.getElementById('travel-toggle').onclick = (event) => {
            event.stopPropagation();
            toggleCard('travel-form-card', 'travel-toggle');
        };
        document.getElementById('event-toggle').onclick = (event) => {
            event.stopPropagation();
            toggleCard('event-form-card', 'event-toggle');
        };
        document.getElementById('shop-toggle').onclick = (event) => {
            event.stopPropagation();
            toggleCard('shop-form-card', 'shop-toggle');
        };

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¨Ø³ØªÙ‡ Ø´Ø¯Ù† ÙØ±Ù… Ø¨Ø§ Ú©Ù„ÛŒÚ© ØªÙˆÛŒ ÙØ±Ù…
        document.querySelectorAll('.form-content').forEach(formContent => {
            formContent.addEventListener('click', (event) => {
                event.stopPropagation();
            });
        });

        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Firebase
        async function initFirebase() {
            const firebaseConfig = {
		  apiKey: "AIzaSyCfMjevdSohHrq6dJxdlrmJ0MZT5HZKZAw",
		  authDomain: "doostihagroupapp.firebaseapp.com",
		  projectId: "doostihagroupapp",
		  storageBucket: "doostihagroupapp.firebasestorage.app",
		  messagingSenderId: "746714229972",
		  appId: "1:746714229972:web:72a26758b58e2ede009f41"
            };

            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                storage = getStorage(app);
                isFirebaseReady = true;
                console.log("Firebase initialized successfully");
            } catch (error) {
                console.error("Firebase initialization failed:", error);
            }
        }

        // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ± Ø¨Ù‡ Firebase Storage
        async function uploadImage(file) {
            if (!file) return '';

            const storageRef = ref(storage, `images/${Date.now()}_${file.name}`);
            try {
                const snapshot = await uploadBytes(storageRef, file);
                const url = await getDownloadURL(snapshot.ref);
                return url;
            } catch (error) {
                console.error('Error uploading image:', error);
                return '';
            }
        }

        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.MainButton.setText("Ø¨Ø³ØªÙ†").show().onClick(() => tg.close());

        // Ú¯Ø±ÙØªÙ† Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
        userInfo = tg.initDataUnsafe.user || {};
        const userAvatar = userInfo && userInfo.photo_url ? userInfo.photo_url : 'https://cdn-icons-png.flaticon.com/512/149/149071.png';

        // Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ ØªÙˆØ±Ù‡Ø§
        document.getElementById('submit-travel').addEventListener('click', async () => {
            if (!isFirebaseReady) {
                alert('Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù‚Ø·Ø¹ Ø§Ø³Øª! Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.');
                return;
            }

            const imageFile = document.getElementById('travel-image').files[0];
            let imageUrl = '';

            try {
                // Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ± Ø§Ú¯Ù‡ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù‡
                if (imageFile) {
                    imageUrl = await uploadImage(imageFile);
                }

                const timestamp = new Date().toISOString();
                const travelData = {
                    organizer: document.getElementById('travel-organizer').value,
                    type: document.getElementById('travel-type').value,
                    leader: document.getElementById('travel-leader').value,
                    vehicle: document.getElementById('travel-vehicle').value,
                    origin: document.getElementById('travel-origin').value,
                    destination: document.getElementById('travel-destination').value,
                    departure: document.getElementById('travel-departure').value,
                    return: document.getElementById('travel-return').value,
                    capacity: document.getElementById('travel-capacity').value,
                    cost: document.getElementById('travel-cost').value,
                    extraCost: document.getElementById('travel-extra-cost').value,
                    card: document.getElementById('travel-card').value,
                    owner: document.getElementById('travel-owner').value,
                    phone: document.getElementById('travel-phone').value,
                    description: document.getElementById('travel-description').value,
                    userId: userInfo && (userInfo.username || userInfo.id) ? (userInfo.username || String(userInfo.id)) : 'unknown',
                    userName: userInfo && userInfo.first_name ? userInfo.first_name : 'Ø¢Ú¯Ù‡ÛŒâ€ŒØ¯Ù‡Ù†Ø¯Ù‡',
                    userAvatar: userAvatar,
                    timestamp: timestamp,
                    imageUrl: imageUrl
                };

                await addDoc(collection(db, 'travels'), travelData);
                alert('Ø¢Ú¯Ù‡ÛŒ ØªÙˆØ± Ø«Ø¨Øª Ø´Ø¯!');
                closeCurrentExpandedCard();
                document.getElementById('travel-form').reset();
                loadTravelAds();
            } catch (error) {
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ: ' + error.message);
                console.error('Error saving travel data:', error);
            }
        });

        // Ø«Ø¨Øª Ø§ÛŒÙˆÙ†Øª
        document.getElementById('submit-event').addEventListener('click', async () => {
            if (!isFirebaseReady) {
                alert('Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù‚Ø·Ø¹ Ø§Ø³Øª! Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.');
                return;
            }

            const imageFile = document.getElementById('event-image').files[0];
            let imageUrl = '';

            try {
                // Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ± Ø§Ú¯Ù‡ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù‡
                if (imageFile) {
                    imageUrl = await uploadImage(imageFile);
                }

                const timestamp = new Date().toISOString();
                const eventData = {
                    title: document.getElementById('event-title').value,
                    startDate: document.getElementById('event-date').value,
                    endDate: document.getElementById('event-end-date').value,
                    location: document.getElementById('event-location').value,
                    capacity: document.getElementById('event-capacity').value,
                    cost: document.getElementById('event-cost').value,
                    description: document.getElementById('event-description').value,
                    userId: userInfo && (userInfo.username || userInfo.id) ? (userInfo.username || String(userInfo.id)) : 'unknown',
                    userName: userInfo && userInfo.first_name ? userInfo.first_name : 'Ø¢Ú¯Ù‡ÛŒâ€ŒØ¯Ù‡Ù†Ø¯Ù‡',
                    userAvatar: userAvatar,
                    timestamp: timestamp,
                    imageUrl: imageUrl
                };

                await addDoc(collection(db, 'events'), eventData);
                alert('Ø§ÛŒÙˆÙ†Øª Ø«Ø¨Øª Ø´Ø¯!');
                closeCurrentExpandedCard();
                document.getElementById('event-form').reset();
                loadEventAds();
            } catch (error) {
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ø§ÛŒÙˆÙ†Øª: ' + error.message);
                console.error('Error saving event data:', error);
            }
        });

        // Ø«Ø¨Øª Ù…Ø­ØµÙˆÙ„
        document.getElementById('submit-shop').addEventListener('click', async () => {
            if (!isFirebaseReady) {
                alert('Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ù‚Ø·Ø¹ Ø§Ø³Øª! Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.');
                return;
            }

            const imageFile = document.getElementById('shop-image').files[0];
            let imageUrl = '';

            try {
                // Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ± Ø§Ú¯Ù‡ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù‡
                if (imageFile) {
                    imageUrl = await uploadImage(imageFile);
                }

                const timestamp = new Date().toISOString();
                const shopData = {
                    status: document.getElementById('shop-status').value,
                    brand: document.getElementById('shop-brand').value,
                    model: document.getElementById('shop-model').value,
                    year: document.getElementById('shop-year').value,
                    price: document.getElementById('shop-price').value,
                    description: document.getElementById('shop-description').value,
                    userId: userInfo && (userInfo.username || userInfo.id) ? (userInfo.username || String(userInfo.id)) : 'unknown',
                    userName: userInfo && userInfo.first_name ? userInfo.first_name : 'Ø¢Ú¯Ù‡ÛŒâ€ŒØ¯Ù‡Ù†Ø¯Ù‡',
                    userAvatar: userAvatar,
                    timestamp: timestamp,
                    imageUrl: imageUrl
                };

                await addDoc(collection(db, 'shop'), shopData);
                alert('Ù…Ø­ØµÙˆÙ„ Ø«Ø¨Øª Ø´Ø¯!');
                closeCurrentExpandedCard();
                document.getElementById('shop-form').reset();
                loadShopAds();
            } catch (error) {
                alert('Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ù…Ø­ØµÙˆÙ„: ' + error.message);
                console.error('Error saving shop data:', error);
            }
        });

        // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†
        document.getElementById('reset-travel').addEventListener('click', () => {
            document.getElementById('travel-form').reset();
        });
        document.getElementById('reset-event').addEventListener('click', () => {
            document.getElementById('event-form').reset();
        });
        document.getElementById('reset-shop').addEventListener('click', () => {
            document.getElementById('shop-form').reset();
        });

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ ØªÙˆØ±Ù‡Ø§
        async function loadTravelAds() {
            const travelAdsList = document.getElementById('travel-ads-list');
            travelAdsList.innerHTML = '';
            try {
                const q = query(collection(db, 'travels'), orderBy('timestamp', 'desc'));
                const travelsSnapshot = await getDocs(q);
                if (travelsSnapshot.empty) {
                    travelAdsList.innerHTML = '<p>Ø¢Ú¯Ù‡ÛŒ ØªÙˆØ±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</p>';
                } else {
                    travelsSnapshot.forEach(doc => {
                        const data = doc.data();
                        const adDiv = document.createElement('div');
                        adDiv.className = 'ad-card';
                        adDiv.data = data;
                        adDiv.type = 'travel';
                        adDiv.imageUrl = data.imageUrl;
                        adDiv.userId = data.userId;
                        adDiv.userName = data.userName;
                        adDiv.userAvatar = data.userAvatar;
                        adDiv.innerHTML = `
                            ${data.imageUrl ? `<img src="${data.imageUrl}" alt="ØªØµÙˆÛŒØ± Ø¢Ú¯Ù‡ÛŒ">` : ''}
                            <div class="content">
                                <strong>ØªÙˆØ±:</strong> ${data.organizer || 'Ù†Ø§Ù…Ø´Ø®Øµ'}<br>
                                <strong>Ù…Ù‚ØµØ¯:</strong> ${data.destination || 'Ù†Ø§Ù…Ø´Ø®Øµ'}<br>
                                <strong>ØªØ§Ø±ÛŒØ®:</strong> ${data.departure || 'Ù†Ø§Ù…Ø´Ø®Øµ'}<br>
                                <strong>Ø¸Ø±ÙÛŒØª:</strong> ${data.capacity || 'Ù†Ø§Ù…Ø´Ø®Øµ'}
                            </div>
                            <div class="expanded-content"></div>
                        `;
                        adDiv.onclick = () => toggleCard(adDiv);
                        travelAdsList.appendChild(adDiv);
                    });
                }
            } catch (error) {
                travelAdsList.innerHTML = '<p>Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§: ' + error.message + '</p>';
            }
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙˆÙ†Øª
        async function loadEventAds() {
            const eventAdsList = document.getElementById('event-ads-list');
            eventAdsList.innerHTML = '';
            try {
                const q = query(collection(db, 'events'), orderBy('timestamp', 'desc'));
                const eventsSnapshot = await getDocs(q);
                if (eventsSnapshot.empty) {
                    eventAdsList.innerHTML = '<p>Ø¢Ú¯Ù‡ÛŒ Ø§ÛŒÙˆÙ†ØªÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</p>';
                } else {
                    eventsSnapshot.forEach(doc => {
                        const data = doc.data();
                        const adDiv = document.createElement('div');
                        adDiv.className = 'ad-card';
                        adDiv.data = data;
                        adDiv.type = 'event';
                        adDiv.imageUrl = data.imageUrl;
                        adDiv.userId = data.userId;
                        adDiv.userName = data.userName;
                        adDiv.userAvatar = data.userAvatar;
                        adDiv.innerHTML = `
                            ${data.imageUrl ? `<img src="${data.imageUrl}" alt="ØªØµÙˆÛŒØ± Ø¢Ú¯Ù‡ÛŒ">` : ''}
                            <div class="content">
                                <strong>Ø¹Ù†ÙˆØ§Ù†:</strong> ${data.title || 'Ù†Ø§Ù…Ø´Ø®Øµ'}<br>
                                <strong>ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹:</strong> ${data.startDate || 'Ù†Ø§Ù…Ø´Ø®Øµ'}<br>
                                <strong>Ù…Ú©Ø§Ù†:</strong> ${data.location || 'Ù†Ø§Ù…Ø´Ø®Øµ'}
                            </div>
                            <div class="expanded-content"></div>
                        `;
                        adDiv.onclick = () => toggleCard(adDiv);
                        eventAdsList.appendChild(adDiv);
                    });
                }
            } catch (error) {
                eventAdsList.innerHTML = '<p>Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§: ' + error.message + '</p>';
            }
        }

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡
        async function loadShopAds() {
            const shopAdsList = document.getElementById('shop-ads-list');
            shopAdsList.innerHTML = '';
            try {
                const q = query(collection(db, 'shop'), orderBy('timestamp', 'desc'));
                const shopSnapshot = await getDocs(q);
                if (shopSnapshot.empty) {
                    shopAdsList.innerHTML = '<p>Ø¢Ú¯Ù‡ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</p>';
                } else {
                    shopSnapshot.forEach(doc => {
                        const data = doc.data();
                        const adDiv = document.createElement('div');
                        adDiv.className = 'ad-card';
                        adDiv.data = data;
                        adDiv.type = 'shop';
                        adDiv.imageUrl = data.imageUrl;
                        adDiv.userId = data.userId;
                        adDiv.userName = data.userName;
                        adDiv.userAvatar = data.userAvatar;
                        adDiv.innerHTML = `
                            ${data.imageUrl ? `<img src="${data.imageUrl}" alt="ØªØµÙˆÛŒØ± Ø¢Ú¯Ù‡ÛŒ">` : ''}
                            <div class="content">
                                <strong>Ø¨Ø±Ù†Ø¯:</strong> ${data.brand || 'Ù†Ø§Ù…Ø´Ø®Øµ'}<br>
                                <strong>ÙˆØ¶Ø¹ÛŒØª:</strong> ${data.status || 'Ù†Ø§Ù…Ø´Ø®Øµ'}<br>
                                <strong>Ù‚ÛŒÙ…Øª:</strong> ${data.price || 'Ù†Ø§Ù…Ø´Ø®Øµ'}
                            </div>
                            <div class="expanded-content"></div>
                        `;
                        adDiv.onclick = () => toggleCard(adDiv);
                        shopAdsList.appendChild(adDiv);
                    });
                }
            } catch (error) {
                shopAdsList.innerHTML = '<p>Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§: ' + error.message + '</p>';
            }
        }

        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Firebase
        initFirebase();
    </script>
</body>
</html>
